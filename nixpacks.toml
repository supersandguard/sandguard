[phases.setup]
nixPkgs = ["nodejs_22"]

[phases.install]
cmds = ["cd frontend && NODE_ENV=development npm install --legacy-peer-deps && cd ../backend && npm install --legacy-peer-deps"]

[phases.build]
cmds = ["cd frontend && npm run build && cp -r dist ../backend/frontend-dist"]

[start]
cmd = "cd backend && npx tsx src/index.ts"
